<!DOCTYPE html>
<html lang="en" data-theme="light">
<!-- Inspired by Zongrong(Jasper) Li's Homepage Template -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Jiale Guo - Homepage</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/css/bootstrap.min.css" integrity="sha512-P5MgMn1jBN01asBgU0z60Qk4QxiXo86+wlFahKrsQf37c9cro517WzVSPPV1tDKzhku2iJ2FVgL67wG03SGnNA==" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.1/css/academicons.min.css" integrity="sha512-b1ASx0WHgVFL5ZQhTgiPWX+68KjS38Jk87jg7pe+qC7q9YkEtFq0z7xCglv7qGIs/68d3mAp+StfC8WKC5SSAg==" crossorigin="anonymous" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Raleway:ital,wght@0,300;0,400;0,500;1,300;1,400;1,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Main CSS styles */
        /* 保留原有样式 */
        
        /* Visitor map marker animation for homepage */
        @keyframes pulse {
            0% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 59, 48, 0.7);
            }
            70% {
                transform: scale(1);
                box-shadow: 0 0 0 6px rgba(255, 59, 48, 0);
            }
            100% {
                transform: scale(0.95);
                box-shadow: 0 0 0 0 rgba(255, 59, 48, 0);
            }
        }
        
        .visitor-marker {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body class="bg-light">
    <nav class="navbar navbar-expand-sm navbar-light bg-light fixed-top mb-5 shadow-sm">
        <div class="container">
            <a class="navbar-brand"><strong>Geospatial Data Science</strong></a>
            <button class="navbar-toggler" style="font-size: 1em; padding: 0.5em;" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
                <i class="fas fa-map"></i> Menu
            </button>

            <div class="collapse navbar-collapse" id="navbarResponsive">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="publications.html">Publications</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="projects.html">Projects</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="news.html">News</a>
                    </li>
                    <li class="nav-item">
                        <button id="theme-toggle" class="theme-toggle nav-link" aria-label="Toggle Dark Mode">
                            <i class="fas fa-sun"></i>
                        </button>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container" style="margin-top: 70px;">
        <div class="row">
            <div class="col">
                <div class="card border-0 shadow-sm bg-white">
                    <div class="card-body p-5">
                        <div class="row">
                            <div class="col">
                                <!-- Profile image floated right on larger screens -->
                                <div class="figure float-right ml-4 mb-4 d-none d-md-block">
                                    <img 
                                        src="Images/guojiale2.jpeg" 
                                        class="figure-img img-fluid img-thumbnail" 
                                        style="height: 160px; object-fit: cover; border-radius: 5px;"
                                        data-toggle="tooltip" 
                                        data-placement="top" 
                                        title="Jiale Guo">
                                </div>

                                <!-- Profile header with responsive layout -->
                                <div class="d-flex flex-wrap align-items-center mb-3">
                                    <div class="h1 font-weight-normal mr-3 mb-2">
                                        Jiale <small>Guo</small>
                                    </div>
                                    
                                    <div class="mr-auto mb-2">
                                        <div class="text-profile-position text-muted">
                                            M.S. in Geoinformatics Engineering<br/>
                                            Politecnico di Milano, Italy
                                        </div>
                                    </div>
                                    
                                    <div class="d-md-none">
                                        <a target="_blank" href="Images/guojiale2.jpeg">
                                            <img src="Images/guojiale2.jpeg" class="rounded-circle" style="height: 48px;" alt="Portrait">
                                        </a>
                                    </div>
                                </div>
                                
                                <div class="text-profile-bio">
                                    <p>
                                      I am an interdisciplinary researcher interested in applying GIScience, computer science, and data-driven methods (machine learning, GeoAI, spatial-temporal data mining) to address real-world geospatial challenges, understand human-environment interactions, and leverage spatial analytics for urban perception and decision-making.
                                    </p>
                                    <p>
                                      Currently, I am pursuing a Master of Science in Geoinformatics Engineering at the 
                                      <a href="https://www.polimi.it/en" target="_blank">Politecnico di Milano</a>, Italy, 
                                      with an expected graduation in 2026. Prior to this, I obtained a Bachelor degree in Geography from 
                                      <a href="https://www.chzu.edu.cn/" target="_blank">Chuzhou University</a>, China.
                                    </p>
                                    <p>
                                      My research interests include GIS, GeoAI, spatiotemporal data analysis, and environmental modeling. I have hands-on experience in research and projects involving remote sensing, spatial-temporal analysis, and environmental simulation.
                                    </p>
                                    <p>
                                      <i class="fa-solid fa-rectangle-ad" style="color: #d60000;"></i> 
                                      <span style="color: #d60000;">I am looking for collaborators</span> 
                                      interested in GeoAI, Spatial Analysis, and their applications in urban science and environmental interactions. 
                                      My goal is to develop tools and methodologies to empower researchers in exploring geospatial data science. 
                                      If you are interested in collaborating, please feel free to reach out via email.
                                    </p>
                                </div>
                                
                                <a target="_blank" href="cv_guojiale.pdf"><i class="fas fa-file-alt"></i> Curriculum Vitae</a> <br/>
                            </div>
                        </div>
                        <hr />
                        <div class="row">
                            <div class="col">
                                <a class="pr-3 no-break" href="mailto:jiale.guo@mail.polimi.it">
                                    <i class="fas fa-at"></i> <span class="email-text">jiale.guo@mail.polimi.it</span>
                                </a>

                                <a class="pr-3 no-break" target="_blank" href="#">
                                    <i class="fab fa-google-scholar"></i> Google Scholar
                                </a>
                                
                                <a class="pr-3 no-break" target="_blank" href="https://github.com/GuojialeGeographer">
                                    <i class="fab fa-github"></i> GitHub
                                </a>
                                
                                <a class="pr-3 no-break" target="_blank" href="#">
                                    <i class="fab fa-linkedin"></i> LinkedIn
                                </a>
                                
                                <a class="pr-3 no-break" target="_blank" href="#">
                                    <i class="fab fa-orcid"></i> ORCID
                                </a>
                            </div>
                        </div>
                    </div>
                </div>        
            </div>
        </div>

        <div class="row mt-3">
            <div class="col">
                <div class="card border-0 shadow-sm bg-white">
                    <div class="card-body p-4">
                        <div class="row" data-masonry='{"percentPosition": true }'>

                            <!-- Left column: Education + Honors & Awards -->
                            <div class="col-md-6">
                                <div class="mx-2 my-1 section-container">
                                    <h6>Education</h6>
                                    <ul class="list-unstyled mb-1">
                                        <li class="media mb-3">
                                            <img src="Images/polimi.png" alt="Politecnico di Milano" style="width: 40px; height: 40px;" class="mr-2 align-self-start mt-1 org-logo">
                                            <div class="media-body">
                                                <div class="d-flex justify-content-between w-100">
                                                    <div><strong>Politecnico di Milano</strong></div>
                                                    <div class="text-right">Milan, Italy</div>
                                                </div>
                                                <div class="d-flex justify-content-between w-100 small">
                                                    <div>M.S. in Geoinformatics Engineering</div>
                                                    <div class="text-right no-break"><em>09.2024 - Present</em></div>
                                                </div>
                                            </div>
                                        </li>
                                        
                                        <li class="media mb-3">
                                            <img src="Images/chuzhou university.png" alt="Chuzhou University" style="width: 40px; height: 40px;" class="mr-2 align-self-start mt-1 org-logo">
                                            <div class="media-body">
                                                <div class="d-flex justify-content-between w-100">
                                                    <div><strong>Chuzhou University</strong></div>
                                                    <div class="text-right">Chuzhou, China</div>
                                                </div>
                                                <div class="d-flex justify-content-between w-100 small">
                                                    <div>B.A. in Geography</div>
                                                    <div class="text-right no-break"><em>09.2017 - 06.2021</em></div>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>

                                <div class="mx-2 my-3 section-container">
                                    <h6>Honors & Awards</h6>
                                    <ul class="awards-list small mb-1">
                                        <li>
                                            <div class="d-flex justify-content-between">
                                                <div>"Esri" College Students GIS Software Development Competition, Third Prize</div>
                                                <div><em>2022</em></div>
                                            </div>
                                        </li>
                                        
                                        <li>
                                            <div class="d-flex justify-content-between">
                                                <div>GIS Skills Competition, Anhui Province, Second Prize</div>
                                                <div><em>2019-2020</em></div>
                                            </div>
                                        </li>
                                        
                                        <li>
                                            <div class="d-flex justify-content-between">
                                                <div>China University Geography Science Exhibition Competition, Third Prize</div>
                                                <div><em>2019</em></div>
                                            </div>
                                        </li>
                                        
                                        <li>
                                            <div class="d-flex justify-content-between">
                                                <div>Excellent Graduation Thesis of Chuzhou University (Top 3%)</div>
                                                <div><em>2021</em></div>
                                            </div>
                                        </li>
                                        
                                        <li>
                                            <div class="d-flex justify-content-between">
                                                <div>Excellent Graduates of Universities in Anhui Province (Top 2%)</div>
                                                <div><em>2021</em></div>
                                            </div>
                                        </li>
                                        
                                        <li>
                                            <div class="d-flex justify-content-between">
                                                <div>National Encouragement Scholarship, Anhui Province (Top 3%)</div>
                                                <div><em>2020</em></div>
                                            </div>
                                        </li>
                                        
                                        <li>
                                            <div class="d-flex justify-content-between">
                                                <div>Excellent Interns & Internship Works (Top 10%)</div>
                                                <div><em>2019</em></div>
                                            </div>
                                        </li>
                                        
                                        <li>
                                            <div class="d-flex justify-content-between">
                                                <div>Academic Excellence Scholarship (Three consecutive years)</div>
                                                <div><em>2017-2020</em></div>
                                            </div>
                                        </li>
                                        
                                        <li>
                                            <div class="d-flex justify-content-between">
                                                <div>Outstanding Student Cadres (Three consecutive years)</div>
                                                <div><em>2017-2020</em></div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Right column: Research Experience & Skills -->
                            <div class="col-md-6">
                                <div class="mx-2 my-1 section-container">
                                    <h6>Research Experience</h6>
                                    <ul class="list-unstyled mb-1">
                                        <li class="media mb-3">
                                            <img src="Images/CAS.png" alt="Chinese Academy of Sciences" style="width: 40px; height: 40px;" class="mr-2 align-self-start mt-1 org-logo">
                                            <div class="media-body">
                                                <div class="d-flex justify-content-between w-100">
                                                    <div><strong>Chinese Academy of Sciences</strong></div>
                                                    <div class="text-right">Lanzhou, China</div>
                                                </div>
                                                <div class="d-flex justify-content-between w-100 small">
                                                    <div>Research Assistant - <a href="http://www.shud.xyz" target="_blank">SHUD-lab</a></div>
                                                    <div class="text-right no-break"><em>10.2021 - 06.2022</em></div>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="media mb-3">
                                            <img src="Images/chuzhou university.png" alt="Chuzhou University" style="width: 40px; height: 40px;" class="mr-2 align-self-start mt-1 org-logo">
                                            <div class="media-body">
                                                <div class="d-flex justify-content-between w-100">
                                                    <div><strong>Chuzhou University</strong></div>
                                                    <div class="text-right">Chuzhou, China</div>
                                                </div>
                                                <div class="d-flex justify-content-between w-100 small">
                                                    <div>Research Assistant - Geographic Big Data Lab</div>
                                                    <div class="text-right no-break"><em>01.2020 - 06.2021</em></div>
                                                </div>
                                                <div class="d-flex justify-content-between w-100 small">
                                                    <div>Research Assistant - Remote Sensing Lab</div>
                                                    <div class="text-right no-break"><em>06.2018 - 12.2019</em></div>
                                                </div>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="mx-2 my-3 section-container">
                                    <h6>Work Experience</h6>
                                    <ul class="list-unstyled mb-1">
                                        <li class="media mb-3">
                                            <div class="media-body">
                                                <div class="d-flex justify-content-between w-100">
                                                    <div><strong>Suzhou Industry Park Mapping Co., Ltd.</strong></div>
                                                    <div class="text-right">Suzhou</div>
                                                </div>
                                                <div class="d-flex justify-content-between w-100 small">
                                                    <div>Geographic Information Data Engineer</div>
                                                    <div class="text-right no-break"><em>01.2023 - 07.2024</em></div>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="media mb-3">
                                            <div class="media-body">
                                                <div class="d-flex justify-content-between w-100">
                                                    <div><strong>Municipal Water Affairs Engineering Co., Ltd.</strong></div>
                                                    <div class="text-right">Chuzhou</div>
                                                </div>
                                                <div class="d-flex justify-content-between w-100 small">
                                                    <div>Graduation Internship</div>
                                                    <div class="text-right no-break"><em>03.2021 - 05.2021</em></div>
                                                </div>
                                            </div>
                                        </li>
                                        <li class="media mb-3">
                                            <div class="media-body">
                                                <div class="d-flex justify-content-between w-100">
                                                    <div><strong>Anhui Province Key Laboratory of Physical Geographic Environment</strong></div>
                                                    <div class="text-right">Chuzhou</div>
                                                </div>
                                                <div class="d-flex justify-content-between w-100 small">
                                                    <div>Internship</div>
                                                    <div class="text-right no-break"><em>05.2019 - 12.2019</em></div>
                                                </div>
                                </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- News Section -->
        <div class="my-3 bg-white shadow-sm rounded-sm">
            <h6 class="p-3 mb-0 border-bottom border-gray"><i class="fas fa-rss"></i> News</h6>
            <div class="px-3 pb-1">
                <div class="media py-1">
                    <div class="mr-3 text-muted my-1">2024</div>
                    <div class="media-body">
                        <div class="my-1 d-flex">
                            <div>Started my Master's degree at Politecnico di Milano.</div>
                            <div class="ml-auto mt-auto text-muted no-break"><i>Sep 01</i></div>
                        </div>
                        
                        <div class="my-1 d-flex">
                            <div>Launched my updated academic website with a new modern design.</div>
                            <div class="ml-auto mt-auto text-muted no-break"><i>Oct 10</i></div>
                        </div>
                    </div>
                </div>
            </div>
            <h6 class="d-block p-3 mt-0 text-right">
                <a href="news.html">More news <i class="fas fa-angle-double-right"></i></a>
            </h6>
        </div>

        <!-- Footer -->
        <footer class="mt-5 mb-3">
            <div class="card border-0 shadow-sm bg-white">
                <div class="card-body p-4">
                    <div class="row">
                        <div class="col-12 text-center">
                            <h5>Visitor Statistics</h5>
                            <p class="small text-muted">Real-time visitor tracking from around the world</p>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 mt-3">
                            <!-- Country/Region Visit Statistics -->
                            <div class="text-center">
                                <h6>Visitors by Country</h6>
                                <a href="https://info.flagcounter.com/RXMK" target="_blank">
                                    <img src="https://s11.flagcounter.com/count2/RXMK/bg_FFFFFF/txt_000000/border_CCCCCC/columns_3/maxflags_12/viewers_0/labels_1/pageviews_1/flags_1/percent_0/" alt="Flag Counter" border="0">
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 mt-4">
                            <!-- Interactive World Map (Local Version) -->
                            <div class="text-center">
                                <h6>Global Visitor Map</h6>
                                <a href="talkmap/map.html" target="_blank">
                                    <div id="homepage-map" style="position: relative; margin: 0 auto; max-width: 800px;">
                                        <img src="talkmap/images/world_map.jpg" width="100%" height="auto" alt="World Map" style="border-radius: 5px; max-width: 100%;">
                                        <!-- Visitor markers will be added by JavaScript -->
                                    </div>
                                </a>
                                <p class="small text-muted mt-1">Click to view detailed visitor statistics</p>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12 text-center">
                            <a href="talkmap/map.html" class="btn btn-sm btn-outline-primary">View Detailed Visitor Map</a>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-12">
                            <div class="text-muted text-center">
                                <i>Last updated: May 2025</i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.0/js/bootstrap.min.js" integrity="sha512-XKa9Hemdy1Ui3KSGgJdgMyYlUg1gM+QhL6cnlyTe2qzMCYm4nAZ1PsVerQzTTXzonUR+dmswHqgJPuwCq1MaAg==" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
    <script src="https://unpkg.com/imagesloaded@5/imagesloaded.pkgd.min.js"></script>
    
    <!-- Theme Toggle Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = themeToggle.querySelector('i');
            
            // Check for saved theme preference or use default
            const currentTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', currentTheme);
            
            // Update button icon based on current theme
            updateThemeIcon(currentTheme);
            
            // Toggle theme on button click
            themeToggle.addEventListener('click', function() {
                let theme = document.documentElement.getAttribute('data-theme');
                let newTheme = theme === 'light' ? 'dark' : 'light';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                
                updateThemeIcon(newTheme);
            });
            
            // Function to update the icon
            function updateThemeIcon(theme) {
                if (theme === 'dark') {
                    themeIcon.classList.remove('fa-sun');
                    themeIcon.classList.add('fa-moon');
                } else {
                    themeIcon.classList.remove('fa-moon');
                    themeIcon.classList.add('fa-sun');
                }
            }
        });
    </script>
    
    <!-- Homepage Map Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 国家代码到经纬度的映射表
            const countryCoordinates = {
                'IT': { country: "Italy", lat: 41.8719, lng: 12.5674 },
                'US': { country: "United States", lat: 37.0902, lng: -95.7129 },
                'CN': { country: "China", lat: 35.8617, lng: 104.1954 },
                'DE': { country: "Germany", lat: 51.1657, lng: 10.4515 },
                'GB': { country: "United Kingdom", lat: 55.3781, lng: -3.4360 },
                'FR': { country: "France", lat: 46.2276, lng: 2.2137 },
                'IN': { country: "India", lat: 20.5937, lng: 78.9629 },
                'JP': { country: "Japan", lat: 36.2048, lng: 138.2529 },
                'CA': { country: "Canada", lat: 56.1304, lng: -106.3468 },
                'AU': { country: "Australia", lat: -25.2744, lng: 133.7751 },
                'BR': { country: "Brazil", lat: -14.2350, lng: -51.9253 },
                'ES': { country: "Spain", lat: 40.4637, lng: -3.7492 },
                'NL': { country: "Netherlands", lat: 52.1326, lng: 5.2913 },
                'RU': { country: "Russia", lat: 61.5240, lng: 105.3188 },
                'KR': { country: "South Korea", lat: 35.9078, lng: 127.7669 }
            };

            // 默认访问者数据，当无法从Flag Counter获取时使用
            let defaultVisitorData = [
                { country: "Italy", lat: 41.8719, lng: 12.5674, visits: 7 },
                { country: "United States", lat: 37.0902, lng: -95.7129, visits: 4 }
            ];
            
            // 尝试从页面上解析实际的Flag Counter数据
            function extractVisitorDataFromFlagCounter() {
                let visitorData = [];
                
                try {
                    // 寻找Flag Counter图像
                    const flagCounterImg = document.querySelector('img[src*="flagcounter.com"]');
                    if (!flagCounterImg) {
                        console.log("Flag Counter image not found, using default data");
                        return defaultVisitorData;
                    }
                    
                    // 直接使用已知的实际访问数据
                    // 这些数据来自于页面上显示的Flag Counter
                    // 意大利和美国的访问次数
                    const italyVisits = 7;  // 从Flag Counter显示中获取
                    const usVisits = 4;     // 从Flag Counter显示中获取
                    
                    // 添加已知的访问数据
                    visitorData.push({
                        country: "Italy",
                        lat: countryCoordinates['IT'].lat,
                        lng: countryCoordinates['IT'].lng,
                        visits: italyVisits
                    });
                    
                    visitorData.push({
                        country: "United States",
                        lat: countryCoordinates['US'].lat,
                        lng: countryCoordinates['US'].lng,
                        visits: usVisits
                    });
                    
                    // 如果Flag Counter中出现新的国家，这里也需要添加
                    
                } catch (error) {
                    console.error("Error extracting visitor data:", error);
                }
                
                // 如果无法获取数据，返回默认数据
                if (visitorData.length === 0) {
                    return defaultVisitorData;
                }
                
                return visitorData;
            }
            
            // 获取访问数据
            const topVisitorData = extractVisitorDataFromFlagCounter();
            
            // Improved function to convert lat/lng to x/y coordinates
            function latLngToPixel(lat, lng, mapWidth, mapHeight) {
                // Handle edge cases for longitude
                const adjustedLng = lng > 180 ? lng - 360 : (lng < -180 ? lng + 360 : lng);
                
                // Convert longitude from -180...+180 to 0...1
                // Add a small offset correction for this specific map image
                const lngFactor = 1.005; // Slight adjustment factor for longitude
                const x = ((adjustedLng * lngFactor) + 180) / 360 * mapWidth;
                
                // Convert latitude from -90...+90 to 0...1 using Mercator-like projection
                const latRad = lat * Math.PI / 180;
                // Limit the latitude range to avoid extreme distortion at poles
                const limitedLat = Math.max(Math.min(latRad, Math.PI/2.1), -Math.PI/2.1);
                
                // Apply Mercator formula with correction factors for this specific map
                const latFactor = 0.98; // Slight adjustment factor for latitude
                const y = (0.5 - Math.log(Math.tan(Math.PI/4 + limitedLat/2)) / (2 * Math.PI)) * mapHeight * latFactor;
                
                return { 
                    x: Math.round(x), 
                    y: Math.round(y)
                };
            }
            
            // Add markers to homepage map
            const homepageMap = document.getElementById('homepage-map');
            if (homepageMap) {
                const mapImage = homepageMap.querySelector('img');
                if (mapImage) {
                    // Wait for the image to load
                    mapImage.onload = function() {
                        const mapWidth = mapImage.clientWidth;
                        const mapHeight = mapImage.clientHeight;
                        
                        // Create markers for each top visitor
                        topVisitorData.forEach(visitor => {
                            const position = latLngToPixel(visitor.lat, visitor.lng, mapWidth, mapHeight);
                            
                            // Create marker element
                            const marker = document.createElement('div');
                            marker.className = 'visitor-marker';
                            marker.title = `${visitor.country}: ${visitor.visits} visits`;
                            
                            // Markers for homepage - slightly larger for better visibility
                            const size = 10;  
                            marker.style.width = `${size}px`;
                            marker.style.height = `${size}px`;
                            marker.style.position = 'absolute';
                            marker.style.borderRadius = '50%';
                            marker.style.backgroundColor = '#ff3b30';
                            marker.style.border = '2px solid #fff';
                            marker.style.boxShadow = '0 0 8px rgba(255, 59, 48, 0.8)';
                            marker.style.left = `${position.x - size/2}px`;
                            marker.style.top = `${position.y - size/2}px`;
                            marker.style.zIndex = '100';
                            
                            // Add to map container
                            homepageMap.appendChild(marker);
                        });
                    };
                }
            }
        });
    </script>
</body>
</html>
